---
import { SHOW_APP } from "../flags";
import InstallBlock from "./ui/InstallBlock.astro";
---

<section class="hero relative pt-32 pb-24 bg-bg-base overflow-hidden max-sm:pt-20 max-sm:pb-16">
  <svg
    class="perspective-grid"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 1440 500"
    preserveAspectRatio="xMidYMax slice"
    aria-hidden="true"
  >
    <defs>
      <linearGradient id="grid-fade" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="white" stop-opacity="0"></stop>
        <stop offset="75%" stop-color="white" stop-opacity="1"></stop>
      </linearGradient>
      <mask id="grid-mask">
        <rect x="-500" y="0" width="2440" height="500" fill="url(#grid-fade)"></rect>
      </mask>
    </defs>
    <g mask="url(#grid-mask)" stroke="rgba(160,160,160,0.2)" stroke-width="1" fill="none">
      <!-- Radial lines from vanishing point at (720, 0) -->
      <line x1="720" y1="0" x2="-240" y2="500"></line>
      <line x1="720" y1="0" x2="-120" y2="500"></line>
      <line x1="720" y1="0" x2="0" y2="500"></line>
      <line x1="720" y1="0" x2="120" y2="500"></line>
      <line x1="720" y1="0" x2="240" y2="500"></line>
      <line x1="720" y1="0" x2="360" y2="500"></line>
      <line x1="720" y1="0" x2="480" y2="500"></line>
      <line x1="720" y1="0" x2="600" y2="500"></line>
      <line x1="720" y1="0" x2="720" y2="500"></line>
      <line x1="720" y1="0" x2="840" y2="500"></line>
      <line x1="720" y1="0" x2="960" y2="500"></line>
      <line x1="720" y1="0" x2="1080" y2="500"></line>
      <line x1="720" y1="0" x2="1200" y2="500"></line>
      <line x1="720" y1="0" x2="1320" y2="500"></line>
      <line x1="720" y1="0" x2="1440" y2="500"></line>
      <line x1="720" y1="0" x2="1560" y2="500"></line>
      <line x1="720" y1="0" x2="1680" y2="500"></line>
      <!-- Horizontal lines: perspective-spaced (y = 500 × 0.8^i from bottom) -->
      <line x1="-500" y1="22" x2="1940" y2="22"></line>
      <line x1="-500" y1="27" x2="1940" y2="27"></line>
      <line x1="-500" y1="34" x2="1940" y2="34"></line>
      <line x1="-500" y1="43" x2="1940" y2="43"></line>
      <line x1="-500" y1="54" x2="1940" y2="54"></line>
      <line x1="-500" y1="67" x2="1940" y2="67"></line>
      <line x1="-500" y1="84" x2="1940" y2="84"></line>
      <line x1="-500" y1="105" x2="1940" y2="105"></line>
      <line x1="-500" y1="131" x2="1940" y2="131"></line>
      <line x1="-500" y1="164" x2="1940" y2="164"></line>
      <line x1="-500" y1="205" x2="1940" y2="205"></line>
      <line x1="-500" y1="256" x2="1940" y2="256"></line>
      <line x1="-500" y1="320" x2="1940" y2="320"></line>
      <line x1="-500" y1="400" x2="1940" y2="400"></line>
      <line x1="-500" y1="500" x2="1940" y2="500"></line>
    </g>
  </svg>
  <div class="container flex flex-col items-center text-center relative z-1">
    <div class="hero-ascii reveal mb-8 max-sm:mb-6" aria-label="oru">
      <pre class="ascii-art font-mono text-text-primary leading-none select-none" role="img" aria-hidden="true">{` ██████╗ ██████╗ ██╗   ██╗
██╔═══██╗██╔══██╗██║   ██║
██║   ██║██████╔╝██║   ██║
██║   ██║██╔══██╗██║   ██║
╚██████╔╝██║  ██║╚██████╔╝
 ╚═════╝ ╚═╝  ╚═╝ ╚═════╝`}</pre>
    </div>
    <p class="font-mono text-sm text-text-tertiary mb-6 tracking-wide reveal" data-delay="80">
      your tasks, managed by your agent
    </p>
    <p class="body-lg max-w-content text-text-secondary mb-10 reveal" data-delay="160">
      Local-first CLI for personal tasks. No accounts. No cloud.
    </p>

    {SHOW_APP && (
      <p class="body text-text-tertiary max-w-[480px] mb-12 reveal" data-delay="200">
        With a native iOS companion for when you are away from the terminal.
      </p>
    )}

    <div class="reveal max-sm:w-full" data-delay="240">
      <InstallBlock />
    </div>

  </div>
</section>

<style>
  .ascii-art {
    font-size: clamp(10px, 2.8vw, 28px);
    letter-spacing: 0.02em;
    white-space: pre;
    line-height: 1.1;
  }

  .perspective-grid {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 65%;
    pointer-events: none;
  }
</style>
