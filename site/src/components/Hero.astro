---
import { SHOW_APP } from "../flags";
import InstallBlock from "./ui/InstallBlock.astro";
---

<section class="hero relative pt-32 pb-24 bg-bg-base overflow-hidden max-sm:pt-20 max-sm:pb-16">
  <svg
    class="perspective-grid"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="-2280 0 6000 500"
    preserveAspectRatio="xMidYMax slice"
    aria-hidden="true"
  >
    <defs>
      <linearGradient id="grid-fade" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="white" stop-opacity="0"></stop>
        <stop offset="75%" stop-color="white" stop-opacity="1"></stop>
      </linearGradient>
      <mask id="grid-mask">
        <rect x="-2800" y="0" width="7040" height="500" fill="url(#grid-fade)"></rect>
      </mask>
    </defs>
    <g mask="url(#grid-mask)" stroke="rgba(160,160,160,0.2)" stroke-width="1" fill="none">
      <!-- Radial lines from vanishing point at (720, 0), spaced 120 at y=500 -->
      <line x1="720" y1="0" x2="-2280" y2="500"></line>
      <line x1="720" y1="0" x2="-2160" y2="500"></line>
      <line x1="720" y1="0" x2="-2040" y2="500"></line>
      <line x1="720" y1="0" x2="-1920" y2="500"></line>
      <line x1="720" y1="0" x2="-1800" y2="500"></line>
      <line x1="720" y1="0" x2="-1680" y2="500"></line>
      <line x1="720" y1="0" x2="-1560" y2="500"></line>
      <line x1="720" y1="0" x2="-1440" y2="500"></line>
      <line x1="720" y1="0" x2="-1320" y2="500"></line>
      <line x1="720" y1="0" x2="-1200" y2="500"></line>
      <line x1="720" y1="0" x2="-1080" y2="500"></line>
      <line x1="720" y1="0" x2="-960" y2="500"></line>
      <line x1="720" y1="0" x2="-840" y2="500"></line>
      <line x1="720" y1="0" x2="-720" y2="500"></line>
      <line x1="720" y1="0" x2="-600" y2="500"></line>
      <line x1="720" y1="0" x2="-480" y2="500"></line>
      <line x1="720" y1="0" x2="-360" y2="500"></line>
      <line x1="720" y1="0" x2="-240" y2="500"></line>
      <line x1="720" y1="0" x2="-120" y2="500"></line>
      <line x1="720" y1="0" x2="0" y2="500"></line>
      <line x1="720" y1="0" x2="120" y2="500"></line>
      <line x1="720" y1="0" x2="240" y2="500"></line>
      <line x1="720" y1="0" x2="360" y2="500"></line>
      <line x1="720" y1="0" x2="480" y2="500"></line>
      <line x1="720" y1="0" x2="600" y2="500"></line>
      <line x1="720" y1="0" x2="720" y2="500"></line>
      <line x1="720" y1="0" x2="840" y2="500"></line>
      <line x1="720" y1="0" x2="960" y2="500"></line>
      <line x1="720" y1="0" x2="1080" y2="500"></line>
      <line x1="720" y1="0" x2="1200" y2="500"></line>
      <line x1="720" y1="0" x2="1320" y2="500"></line>
      <line x1="720" y1="0" x2="1440" y2="500"></line>
      <line x1="720" y1="0" x2="1560" y2="500"></line>
      <line x1="720" y1="0" x2="1680" y2="500"></line>
      <line x1="720" y1="0" x2="1800" y2="500"></line>
      <line x1="720" y1="0" x2="1920" y2="500"></line>
      <line x1="720" y1="0" x2="2040" y2="500"></line>
      <line x1="720" y1="0" x2="2160" y2="500"></line>
      <line x1="720" y1="0" x2="2280" y2="500"></line>
      <line x1="720" y1="0" x2="2400" y2="500"></line>
      <line x1="720" y1="0" x2="2520" y2="500"></line>
      <line x1="720" y1="0" x2="2640" y2="500"></line>
      <line x1="720" y1="0" x2="2760" y2="500"></line>
      <line x1="720" y1="0" x2="2880" y2="500"></line>
      <line x1="720" y1="0" x2="3000" y2="500"></line>
      <line x1="720" y1="0" x2="3120" y2="500"></line>
      <line x1="720" y1="0" x2="3240" y2="500"></line>
      <line x1="720" y1="0" x2="3360" y2="500"></line>
      <line x1="720" y1="0" x2="3480" y2="500"></line>
      <line x1="720" y1="0" x2="3600" y2="500"></line>
      <line x1="720" y1="0" x2="3720" y2="500"></line>
      <!-- Horizontal lines: log-spaced from y=1 to y=500 -->
      <line x1="-2800" y1="1" x2="4240" y2="1"></line>
      <line x1="-2800" y1="1.2" x2="4240" y2="1.2"></line>
      <line x1="-2800" y1="1.4" x2="4240" y2="1.4"></line>
      <line x1="-2800" y1="1.6" x2="4240" y2="1.6"></line>
      <line x1="-2800" y1="1.9" x2="4240" y2="1.9"></line>
      <line x1="-2800" y1="2.2" x2="4240" y2="2.2"></line>
      <line x1="-2800" y1="2.6" x2="4240" y2="2.6"></line>
      <line x1="-2800" y1="3.1" x2="4240" y2="3.1"></line>
      <line x1="-2800" y1="3.6" x2="4240" y2="3.6"></line>
      <line x1="-2800" y1="4.2" x2="4240" y2="4.2"></line>
      <line x1="-2800" y1="4.9" x2="4240" y2="4.9"></line>
      <line x1="-2800" y1="5.8" x2="4240" y2="5.8"></line>
      <line x1="-2800" y1="6.8" x2="4240" y2="6.8"></line>
      <line x1="-2800" y1="7.9" x2="4240" y2="7.9"></line>
      <line x1="-2800" y1="9.3" x2="4240" y2="9.3"></line>
      <line x1="-2800" y1="10.9" x2="4240" y2="10.9"></line>
      <line x1="-2800" y1="12.8" x2="4240" y2="12.8"></line>
      <line x1="-2800" y1="15" x2="4240" y2="15"></line>
      <line x1="-2800" y1="17.6" x2="4240" y2="17.6"></line>
      <line x1="-2800" y1="20.6" x2="4240" y2="20.6"></line>
      <line x1="-2800" y1="24.2" x2="4240" y2="24.2"></line>
      <line x1="-2800" y1="28.4" x2="4240" y2="28.4"></line>
      <line x1="-2800" y1="33.3" x2="4240" y2="33.3"></line>
      <line x1="-2800" y1="39" x2="4240" y2="39"></line>
      <line x1="-2800" y1="45.8" x2="4240" y2="45.8"></line>
      <line x1="-2800" y1="53.7" x2="4240" y2="53.7"></line>
      <line x1="-2800" y1="63" x2="4240" y2="63"></line>
      <line x1="-2800" y1="73.9" x2="4240" y2="73.9"></line>
      <line x1="-2800" y1="86.6" x2="4240" y2="86.6"></line>
      <line x1="-2800" y1="102" x2="4240" y2="102"></line>
      <line x1="-2800" y1="119" x2="4240" y2="119"></line>
      <line x1="-2800" y1="140" x2="4240" y2="140"></line>
      <line x1="-2800" y1="164" x2="4240" y2="164"></line>
      <line x1="-2800" y1="192" x2="4240" y2="192"></line>
      <line x1="-2800" y1="225" x2="4240" y2="225"></line>
      <line x1="-2800" y1="264" x2="4240" y2="264"></line>
      <line x1="-2800" y1="310" x2="4240" y2="310"></line>
      <line x1="-2800" y1="363" x2="4240" y2="363"></line>
      <line x1="-2800" y1="426" x2="4240" y2="426"></line>
      <line x1="-2800" y1="500" x2="4240" y2="500"></line>
    </g>
  </svg>
  <div class="container flex flex-col items-center text-center relative z-1">
    <div class="hero-ascii reveal mb-8 max-sm:mb-6" aria-label="oru">
      <pre class="ascii-art font-mono text-text-primary leading-none select-none" role="img" aria-hidden="true">{` ██████╗ ██████╗ ██╗   ██╗
██╔═══██╗██╔══██╗██║   ██║
██║   ██║██████╔╝██║   ██║
██║   ██║██╔══██╗██║   ██║
╚██████╔╝██║  ██║╚██████╔╝
 ╚═════╝ ╚═╝  ╚═╝ ╚═════╝`}</pre>
    </div>
    <p class="font-mono text-sm text-text-tertiary mb-6 tracking-wide reveal" data-delay="80">
      your tasks, managed by your agent
    </p>
    <p class="body-lg max-w-content text-text-secondary mb-10 reveal" data-delay="160">
      Local-first CLI for personal tasks. No accounts. No cloud.
    </p>

    {SHOW_APP && (
      <p class="body text-text-tertiary max-w-[480px] mb-12 reveal" data-delay="200">
        With a native iOS companion for when you are away from the terminal.
      </p>
    )}

    <div class="reveal max-sm:w-full" data-delay="240">
      <InstallBlock />
    </div>

  </div>
</section>

<style>
  .ascii-art {
    font-size: clamp(10px, 2.8vw, 28px);
    letter-spacing: 0.02em;
    white-space: pre;
    line-height: 1.1;
  }

  .perspective-grid {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 65%;
    pointer-events: none;
  }
</style>
