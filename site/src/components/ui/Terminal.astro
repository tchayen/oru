---
interface Props {
  title?: string;
  class?: string;
}

const { title = "terminal", class: className = "" } = Astro.props;
---

<div
  class:list={[
    "terminal bg-bg-inset border border-border-default rounded-2xl overflow-hidden min-w-0 shadow-[0_0_0_1px_rgba(255,255,255,0.03),0_4px_24px_rgba(0,0,0,0.4),0_24px_80px_rgba(0,0,0,0.5)] transition-[border-color,box-shadow] duration-300 ease-out-expo",
    className,
  ]}
>
  <div
    class="flex items-center gap-2 py-3.5 px-[18px] border-b border-border-subtle"
  >
    <div class="terminal-dots flex gap-2">
      <span class="terminal-dot w-3 h-3 rounded-full bg-border-default transition-[background] duration-200 ease-out-expo"></span>
      <span class="terminal-dot w-3 h-3 rounded-full bg-border-default transition-[background] duration-200 ease-out-expo"></span>
      <span class="terminal-dot w-3 h-3 rounded-full bg-border-default transition-[background] duration-200 ease-out-expo"></span>
    </div>
    <span class="font-mono text-xs text-text-muted ml-1">{title}</span>
  </div>
  <div class="terminal-body p-6 font-mono text-sm leading-[1.7] text-text-secondary overflow-x-auto">
    <slot />
  </div>
</div>

<style>
  .terminal:hover {
    border-color: var(--color-accent-border);
    box-shadow:
      0 0 0 1px rgba(234, 88, 12, 0.1),
      0 0 24px rgba(234, 88, 12, 0.06),
      0 4px 24px rgba(0, 0, 0, 0.4),
      0 24px 80px rgba(0, 0, 0, 0.5);
  }

  .terminal:hover .terminal-dot:nth-child(1) {
    background: #ef4444;
  }
  .terminal:hover .terminal-dot:nth-child(2) {
    background: #eab308;
  }
  .terminal:hover .terminal-dot:nth-child(3) {
    background: #22c55e;
  }

  .terminal-body :global(.prompt) {
    color: var(--color-accent);
    user-select: none;
  }
  .terminal-body :global(.cmd) {
    color: var(--color-text-primary);
  }
  .terminal-body :global(.sub) {
    color: var(--color-syn-command);
  }
  .terminal-body :global(.flag) {
    color: var(--color-syn-flag);
  }
  .terminal-body :global(.str) {
    color: var(--color-syn-string);
  }
  .terminal-body :global(.val) {
    color: var(--color-syn-value);
  }
  .terminal-body :global(.key) {
    color: var(--color-syn-key);
  }
  .terminal-body :global(.output) {
    color: var(--color-text-tertiary);
  }
  .terminal-body :global(.line) {
    display: block;
    white-space: pre;
  }
  .terminal-body :global(.line + .line) {
    margin-top: 0;
  }
  .terminal-body :global(.blank) {
    display: block;
    height: 1.7em;
  }

  @media (prefers-reduced-motion: reduce) {
    .terminal {
      transition: none;
    }
  }
</style>
