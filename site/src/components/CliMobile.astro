---
import Terminal from "./ui/Terminal.astro";
---

<section class="cli-mobile">
  <div class="container">
    <div class="cli-header reveal">
      <p class="section-label">CLI + Mobile</p>
      <h2>Terminal-first. Phone when you need it.</h2>
      <p class="body-lg cli-body">
        ao is a CLI tool. That is its primary interface and it always will be.
        But tasks follow you. The native iOS app exists for those moments.
      </p>
    </div>

    <div class="cli-grid">
      <div class="cli-terminal reveal" data-delay="80">
        <h3>Pair with a QR code. No accounts required.</h3>
        <p class="body cli-desc">
          Run <code>ao server start</code>. A QR code appears in your terminal.
          Scan it with the iOS app. You are connected over your local network.
          That is the entire pairing flow.
        </p>
        <p class="body-sm cli-desc-secondary">
          No cloud relay. No account creation. No sync service to configure. The
          phone talks directly to your machine.
        </p>
        <Terminal title="ao server start">
          <span class="line"
            ><span class="prompt">$ </span><span class="cmd">ao</span>
            <span class="sub">server</span>
            <span class="sub">start</span></span
          >
          <span class="blank"></span>
          <span class="line"
            ><span class="output">
              Server running on http://192.168.1.42:3000</span
            ></span
          >
          <span class="blank"></span>
          <span class="line"
            ><span class="output">
              Scan this QR code with the ao iOS app:</span
            ></span
          >
          <span class="blank"></span>
          <span class="line qr-art"
            ><span class="output">
              ██████████████ ██ ████████████████</span
            ></span
          >
          <span class="line qr-art"
            ><span class="output"> ██ ██ ████ ██ ██</span></span
          >
          <span class="line qr-art"
            ><span class="output"> ██ ██████ ██ ██ ██ ██████ ██</span></span
          >
          <span class="line qr-art"
            ><span class="output"> ██ ██████ ██ ██ ██ ██████ ██</span></span
          >
          <span class="line qr-art"
            ><span class="output"> ██ ██████ ██ ██ ██ ██████ ██</span></span
          >
          <span class="line qr-art"
            ><span class="output"> ██ ██ ██ ██</span></span
          >
          <span class="line qr-art"
            ><span class="output">
              ██████████████ ██ ████████████████</span
            ></span
          >
          <span class="blank"></span>
          <span class="line"
            ><span class="output"> Waiting for connection...</span></span
          >
        </Terminal>
      </div>

      <div class="cli-phone reveal" data-delay="240">
        <h3>Native iOS, not a web view.</h3>
        <p class="body cli-desc">
          SwiftUI components. SF Symbols. System colors. Haptic feedback. The
          app is built with Expo and React Native but renders native controls.
        </p>
        <div class="phone-frame">
          <div class="phone-notch"></div>
          <div class="phone-screen">
            <div class="phone-header">
              <span class="phone-title">Tasks</span>
              <span class="phone-count">3 items</span>
            </div>
            <div class="phone-list">
              <div class="phone-task">
                <div class="phone-task-check done"></div>
                <div class="phone-task-content">
                  <span class="phone-task-title strikethrough"
                    >Refactor auth middleware</span
                  >
                  <span class="phone-task-meta"
                    ><span class="priority-high"></span> high &middot; Fri Feb 20</span
                  >
                </div>
              </div>
              <div class="phone-task">
                <div class="phone-task-check in-progress"></div>
                <div class="phone-task-content">
                  <span class="phone-task-title">Write migration tests</span>
                  <span class="phone-task-meta"
                    ><span class="priority-medium"></span> medium</span
                  >
                </div>
              </div>
              <div class="phone-task">
                <div class="phone-task-check"></div>
                <div class="phone-task-content">
                  <span class="phone-task-title">Update API docs</span>
                  <span class="phone-task-meta"
                    ><span class="priority-low"></span> low</span
                  >
                </div>
              </div>
            </div>
            <div class="phone-tab-bar">
              <div class="phone-tab active">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  ><path d="M9 11l3 3L22 4"></path><path
                    d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"
                  ></path></svg
                >
                <span>Tasks</span>
              </div>
              <div class="phone-tab">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  ><circle cx="12" cy="12" r="3"></circle><path
                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                  ></path></svg
                >
                <span>Settings</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .cli-mobile {
    padding: 96px 0;
    background: var(--bg-base);
  }

  .cli-header {
    text-align: center;
    margin-bottom: 64px;
  }

  .cli-header h2 {
    margin-bottom: 16px;
  }

  .cli-body {
    max-width: 560px;
    margin: 0 auto;
    color: var(--text-secondary);
  }

  .cli-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 48px;
    align-items: start;
  }

  .cli-terminal {
    min-width: 0;
  }

  .cli-terminal h3,
  .cli-phone h3 {
    font-size: 22px;
    margin-bottom: 12px;
  }

  .cli-desc {
    color: var(--text-secondary);
    margin-bottom: 12px;
  }

  .cli-desc code {
    font-family: "JetBrains Mono", monospace;
    font-size: 13px;
    background: var(--bg-surface);
    padding: 2px 6px;
    border-radius: 4px;
    color: var(--accent);
  }

  .cli-desc-secondary {
    color: var(--text-tertiary);
    margin-bottom: 24px;
  }

  /* Phone frame */
  .phone-frame {
    margin-top: 24px;
    background: #000;
    border: 2px solid var(--border-default);
    border-radius: 40px;
    padding: 12px;
    max-width: 320px;
    margin-left: auto;
    margin-right: auto;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.05),
      0 8px 40px rgba(0, 0, 0, 0.5);
  }

  .phone-notch {
    width: 120px;
    height: 28px;
    background: #000;
    border-radius: 0 0 16px 16px;
    margin: 0 auto 8px;
    position: relative;
    z-index: 1;
  }

  .phone-screen {
    background: var(--bg-base);
    border-radius: 28px;
    overflow: hidden;
    min-height: 480px;
    display: flex;
    flex-direction: column;
  }

  .phone-header {
    padding: 16px 20px 12px;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
  }

  .phone-title {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
  }

  .phone-count {
    font-size: 13px;
    color: var(--text-tertiary);
  }

  .phone-list {
    flex: 1;
    padding: 0 12px;
  }

  .phone-task {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px 8px;
    border-bottom: 1px solid var(--border-subtle);
  }

  .phone-task-check {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2px solid var(--border-default);
    flex-shrink: 0;
    margin-top: 1px;
  }

  .phone-task-check.done {
    background: var(--accent);
    border-color: var(--accent);
  }

  .phone-task-check.in-progress {
    border-color: var(--syn-command);
    background: rgba(96, 165, 250, 0.15);
  }

  .phone-task-content {
    display: flex;
    flex-direction: column;
    gap: 3px;
    min-width: 0;
  }

  .phone-task-title {
    font-size: 15px;
    color: var(--text-primary);
    font-weight: 500;
  }

  .phone-task-title.strikethrough {
    text-decoration: line-through;
    color: var(--text-tertiary);
  }

  .phone-task-meta {
    font-size: 12px;
    color: var(--text-tertiary);
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .priority-high,
  .priority-medium,
  .priority-low {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    display: inline-block;
  }

  .priority-high {
    background: #ef4444;
  }
  .priority-medium {
    background: var(--accent);
  }
  .priority-low {
    background: var(--syn-command);
  }

  .phone-tab-bar {
    display: flex;
    border-top: 1px solid var(--border-subtle);
    padding: 8px 0 20px;
  }

  .phone-tab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    color: var(--text-muted);
    font-size: 10px;
  }

  .phone-tab.active {
    color: var(--accent);
  }

  .qr-art {
    font-size: 8px !important;
    line-height: 1.2 !important;
    letter-spacing: 0.05em;
  }

  @media (max-width: 767px) {
    .cli-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
