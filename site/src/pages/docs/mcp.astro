---
import DocsLayout from "../../layouts/DocsLayout.astro";
import MiniCode from "../../components/ui/MiniCode.astro";
---

<DocsLayout
  title="MCP server"
  description="Use oru as a Model Context Protocol server so AI agents can manage your tasks directly."
>
  <p>
    oru includes a built-in <a href="https://modelcontextprotocol.io">Model Context Protocol</a>
    (MCP) server. Connect it to any MCP-compatible AI client and your agent can create,
    update, and query tasks without leaving the conversation.
  </p>

  <h2>Starting the server</h2>
  <p>
    Run <code>oru mcp</code> to start the server over stdio. MCP clients launch it
    as a subprocess automatically &ndash; you don&apos;t run it manually.
  </p>
  <MiniCode copy>
    <span class="prompt">$ </span><span class="cmd">oru</span> <span class="sub">mcp</span>
  </MiniCode>

  <h2>Available tools</h2>
  <table>
    <thead>
      <tr>
        <th>Tool</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr><td><code>add_task</code></td><td>Create a task. Pass <code>id</code> for idempotent creates.</td></tr>
      <tr><td><code>update_task</code></td><td>Update fields on an existing task. Only changed fields need to be sent.</td></tr>
      <tr><td><code>delete_task</code></td><td>Soft-delete a task by ID or prefix.</td></tr>
      <tr><td><code>list_tasks</code></td><td>List tasks with optional status, priority, label, and search filters.</td></tr>
      <tr><td><code>get_task</code></td><td>Fetch a single task by ID or unique prefix.</td></tr>
      <tr><td><code>get_context</code></td><td>Dashboard summary: overdue, due soon, in progress, actionable, blocked, recently done.</td></tr>
      <tr><td><code>add_note</code></td><td>Append a note to a task (append-only, deduplicated).</td></tr>
      <tr><td><code>list_labels</code></td><td>Return all labels currently in use.</td></tr>
    </tbody>
  </table>

  <h2>Installation by client</h2>
  <p>
    All clients use a JSON config file to declare MCP servers. The format is
    nearly identical across clients: a <code>mcpServers</code> object where each
    key is a server name and the value specifies how to launch it.
  </p>

  <h3>Claude Desktop</h3>
  <p>
    Edit <code>~/Library/Application Support/Claude/claude_desktop_config.json</code> on
    macOS, or <code>%APPDATA%\Claude\claude_desktop_config.json</code> on Windows:
  </p>
  <MiniCode>
    <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;<span class="key">"mcpServers"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"oru"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"command"</span>: <span class="str">"oru"</span>,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"args"</span>: [<span class="str">"mcp"</span>]<br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="flag">&#125;</span><br />
    &nbsp;&nbsp;<span class="flag">&#125;</span><br />
    <span class="flag">&#125;</span>
  </MiniCode>
  <p>Restart Claude Desktop after saving.</p>

  <h3>Claude Code</h3>
  <p>
    Add the server with the <code>claude mcp add</code> command:
  </p>
  <MiniCode copy>
    <span class="prompt">$ </span><span class="cmd">claude</span> <span class="sub">mcp</span> <span class="sub">add</span> <span class="val">oru</span> <span class="flag">--</span> <span class="cmd">oru</span> <span class="sub">mcp</span>
  </MiniCode>
  <p>
    This writes to <code>~/.claude.json</code> by default. Add
    <code>--scope project</code> to instead write to <code>.mcp.json</code> in
    the project root, which can be checked into version control to share with
    your team.
  </p>

  <h3>Cursor</h3>
  <p>
    Global config: <code>~/.cursor/mcp.json</code><br />
    Project config: <code>.cursor/mcp.json</code> in the project root
  </p>
  <MiniCode>
    <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;<span class="key">"mcpServers"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"oru"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"command"</span>: <span class="str">"oru"</span>,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"args"</span>: [<span class="str">"mcp"</span>]<br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="flag">&#125;</span><br />
    &nbsp;&nbsp;<span class="flag">&#125;</span><br />
    <span class="flag">&#125;</span>
  </MiniCode>

  <h3>VS Code (GitHub Copilot)</h3>
  <p>
    Create or edit <code>.vscode/mcp.json</code> in your workspace. VS Code uses
    a <code>servers</code> key (not <code>mcpServers</code>) and requires a
    <code>type</code> field:
  </p>
  <MiniCode>
    <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;<span class="key">"servers"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"oru"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"type"</span>: <span class="str">"stdio"</span>,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"command"</span>: <span class="str">"oru"</span>,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"args"</span>: [<span class="str">"mcp"</span>]<br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="flag">&#125;</span><br />
    &nbsp;&nbsp;<span class="flag">&#125;</span><br />
    <span class="flag">&#125;</span>
  </MiniCode>
  <p>
    You can commit <code>.vscode/mcp.json</code> to share the config with your team.
    Enable MCP in VS Code via <strong>Settings &rarr; Chat &rarr; MCP &rarr; Enabled</strong>.
  </p>

  <h3>Windsurf</h3>
  <p>
    Edit <code>~/.codeium/windsurf/mcp_config.json</code>:
  </p>
  <MiniCode>
    <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;<span class="key">"mcpServers"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"oru"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"command"</span>: <span class="str">"oru"</span>,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"args"</span>: [<span class="str">"mcp"</span>]<br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="flag">&#125;</span><br />
    &nbsp;&nbsp;<span class="flag">&#125;</span><br />
    <span class="flag">&#125;</span>
  </MiniCode>

  <h3>Zed</h3>
  <p>
    Open <strong>Zed &rarr; Settings</strong> (<code>cmd+,</code>) and add to
    <code>~/.config/zed/settings.json</code>:
  </p>
  <MiniCode>
    <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;<span class="key">"context_servers"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"oru"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"command"</span>: <span class="str">"oru"</span>,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"args"</span>: [<span class="str">"mcp"</span>]<br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="flag">&#125;</span><br />
    &nbsp;&nbsp;<span class="flag">&#125;</span><br />
    <span class="flag">&#125;</span>
  </MiniCode>

  <h2>Using a full path</h2>
  <p>
    If <code>oru</code> is not on the <code>PATH</code> inside your AI client&apos;s
    process (common on macOS when apps don&apos;t inherit shell config), use the
    full binary path instead:
  </p>
  <MiniCode copy>
    <span class="prompt">$ </span><span class="cmd">which</span> <span class="val">oru</span>
  </MiniCode>
  <p>
    Then replace <code>"command": "oru"</code> with the full path, e.g.
    <code>"command": "/usr/local/bin/oru"</code>.
  </p>

  <h2>Custom database path</h2>
  <p>
    Pass <code>ORU_DB_PATH</code> in the <code>env</code> block if you want the
    MCP server to use a different database than the default
    <code>~/.oru/oru.db</code>:
  </p>
  <MiniCode>
    <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;<span class="key">"mcpServers"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"oru"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"command"</span>: <span class="str">"oru"</span>,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"args"</span>: [<span class="str">"mcp"</span>],<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"env"</span>: <span class="flag">&#123;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">"ORU_DB_PATH"</span>: <span class="str">"/path/to/my.db"</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="flag">&#125;</span><br />
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="flag">&#125;</span><br />
    &nbsp;&nbsp;<span class="flag">&#125;</span><br />
    <span class="flag">&#125;</span>
  </MiniCode>

  <h2>AGENTS.md</h2>
  <p>
    Drop an <code>AGENTS.md</code> (or <code>CLAUDE.md</code>) file in your project
    root to tell AI agents how to use oru for task tracking in that project. This
    works alongside the MCP server &ndash; the file gives agents high-level guidance
    while the MCP tools give them direct access to your task list.
  </p>
  <p>
    See the <a href="https://github.com/tchayen/oru">repository</a> for an example.
  </p>
</DocsLayout>
